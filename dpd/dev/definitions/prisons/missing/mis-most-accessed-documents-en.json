{
  "id": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
  "name": "MIS Most Accessed Documents EN",
  "metadata": {
    "version": "1.0.0",
    "tags": []
  },
  "description": "What are the 10 most viewed, edited, and refreshed documents?",
  "datasource": [
    {
      "id": "bodmis",
      "name": "BODMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "bodmis"
    }
  ],
  "dataset": [
    {
      "id": "undefined/DP6",
      "name": "Top Documents by Views",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DERIVED_VIEWED_REPORT_NAME.Detail_Text, AUDIT_EVENT.Event_ID FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND ((AUDIT_DETAIL.Detail_Type_ID = 3 AND AUDIT_EVENT.Event_Type_ID = 196609) OR (AUDIT_DETAIL.Detail_Type_ID = 8 AND AUDIT_EVENT.Event_Type_ID = 11))) DERIVED_VIEWED_REPORT_NAME, AUDIT_EVENT, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 43)) DERIVED_OBJECT_PATH WHERE (AUDIT_EVENT.Server_CUID = DERIVED_VIEWED_REPORT_NAME.SERVER_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_VIEWED_REPORT_NAME.EVENT_ID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_PATH.EVENT_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_PATH.SERVER_CUID) AND (AUDIT_EVENT.Object_Type IN ('Desktop Intelligence', 'Crystal Reports', 'Web Intelligence') AND DERIVED_OBJECT_PATH.Detail_Text LIKE '/%' AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('23-10-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('26-11-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS'))), dataset_ AS (SELECT DETAIL_TEXT, EVENT_ID FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "Viewed Report Name",
            "legacyId": "DP6.DO44",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "EVENT_ID",
            "type": "string",
            "display": "Action ID",
            "legacyId": "DP6.DO21",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "undefined/DP7",
      "name": "Top Documents by Edits",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DERIVED_EDITED_REPORT_NAME.Detail_Text, AUDIT_EVENT.Event_ID FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND ((AUDIT_DETAIL.Detail_Type_ID = 3 AND AUDIT_EVENT.Event_Type_ID = 458753) OR (AUDIT_DETAIL.Detail_Type_ID = 8 AND AUDIT_EVENT.Event_Type_ID = 22))) DERIVED_EDITED_REPORT_NAME, AUDIT_EVENT, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 43)) DERIVED_OBJECT_PATH WHERE (AUDIT_EVENT.Event_ID = DERIVED_EDITED_REPORT_NAME.EVENT_ID) AND (AUDIT_EVENT.Server_CUID = DERIVED_EDITED_REPORT_NAME.SERVER_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_PATH.EVENT_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_PATH.SERVER_CUID) AND (AUDIT_EVENT.Object_Type IN ('Desktop Intelligence', 'Crystal Reports', 'Web Intelligence') AND DERIVED_OBJECT_PATH.Detail_Text LIKE '/%' AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('23-10-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('26-11-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS'))), dataset_ AS (SELECT DETAIL_TEXT, EVENT_ID FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "Edited Report Name",
            "legacyId": "DP7.DO46",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "EVENT_ID",
            "type": "string",
            "display": "Action ID",
            "legacyId": "DP7.DO21",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "undefined/DP8",
      "name": "Top Documents by Refreshes",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DERIVED_DOCUMENT_NAME.Detail_Text, AUDIT_EVENT.Event_ID FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 8)) DERIVED_DOCUMENT_NAME, AUDIT_EVENT, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 43)) DERIVED_OBJECT_PATH WHERE (AUDIT_EVENT.Event_ID = DERIVED_DOCUMENT_NAME.Event_ID AND AUDIT_EVENT.Server_CUID = DERIVED_DOCUMENT_NAME.Server_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_PATH.EVENT_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_PATH.SERVER_CUID) AND (AUDIT_EVENT.Event_Type_ID = 19 AND AUDIT_EVENT.Object_Type IN ('Desktop Intelligence', 'Crystal Reports', 'Web Intelligence') AND DERIVED_OBJECT_PATH.Detail_Text LIKE '/%' AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('23-10-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('26-11-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS'))), dataset_ AS (SELECT DETAIL_TEXT, EVENT_ID, COUNTDISTINCT(TOP_DOCUMENTS_BY_REFRESHES.EVENT_ID) AS NUMBER_OF_REFRESHES FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "Document Name",
            "legacyId": "DP8.DO40",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "EVENT_ID",
            "type": "string",
            "display": "Action ID",
            "legacyId": "DP8.DO21",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "NUMBER_OF_REFRESHES",
            "type": "string",
            "display": "NUMBER_OF_REFRESHES",
            "legacyId": "???",
            "legacySqlClass": "alias"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": [
                "${role}",
                "ROLE_PRISONS_REPORTING_USER"
              ]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "17645.RS",
      "name": "By Times Read",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": []
      },
      "dataset": "MISSING"
    },
    {
      "id": "20205.RS",
      "name": "By Edits",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": []
      },
      "dataset": "MISSING"
    },
    {
      "id": "2334.RS",
      "name": "By Refreshes",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": []
      },
      "dataset": "MISSING"
    },
    {
      "id": "20261.RS",
      "name": "By Refreshes (1)",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "undefined/DP8",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:DETAIL_TEXT",
            "display": "Document Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP8.DO40"
          },
          {
            "name": "$ref:NUMBER_OF_REFRESHES",
            "display": "=NameOf([Number of refreshes])",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=Count([Top Documents by Refreshes].[Action ID]; Distinct)"
          }
        ]
      }
    }
  ],
  "errors": [
    {
      "type": "schema",
      "error": "instance.report[0] requires property \"dataset\"",
      "entityId": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "instance.report[0].specification.template is not one of enum values: list,list-section,list-tab,summary,summary-section,parent-child,parent-child-section",
      "entityId": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "instance.report[1] requires property \"dataset\"",
      "entityId": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "instance.report[1].specification.template is not one of enum values: list,list-section,list-tab,summary,summary-section,parent-child,parent-child-section",
      "entityId": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "instance.report[2] requires property \"dataset\"",
      "entityId": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "instance.report[2].specification.template is not one of enum values: list,list-section,list-tab,summary,summary-section,parent-child,parent-child-section",
      "entityId": "FguFv18BwAQAGlEAAHDb6F4XACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "Report Variant 17645.RS does not have corresponding dataset undefined",
      "entityId": "17645.RS",
      "entityType": "variant"
    },
    {
      "type": "schema",
      "error": "Report Variant 20205.RS does not have corresponding dataset undefined",
      "entityId": "20205.RS",
      "entityType": "variant"
    },
    {
      "type": "schema",
      "error": "Report Variant 2334.RS does not have corresponding dataset undefined",
      "entityId": "2334.RS",
      "entityType": "variant"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP6",
      "entityType": "dataset"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP7",
      "entityType": "dataset"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP8",
      "entityType": "dataset"
    }
  ]
}