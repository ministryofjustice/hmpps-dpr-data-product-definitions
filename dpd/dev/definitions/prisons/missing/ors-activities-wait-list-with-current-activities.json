{
  "id": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
  "name": "ORS Activities Wait List with Current Activities",
  "description": "This report shows the active prisoners who are on the wait list, whether approved or pending and another tab for rejected.  The report also displays the Prisoners current activities, Prisoners who are unemployed but on a Wait List, also those who are not allocated and not on Wait List.<br/>ACT0028 - v7.0 Last Modified: 04/05/2023",
  "metadata": {
    "version": "1.0.0",
    "tags": [
      "ACT0028",
      "Activities",
      "Wait List",
      "Current Activities",
      "Rejected",
      "Workplace Assessments"
    ]
  },
  "datasource": [
    {
      "id": "nomis",
      "name": "NOMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "nomis"
    }
  ],
  "dataset": [
    {
      "id": "3377239/DP2",
      "name": "Wait List",
      "description": "OR - Activities",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.OFFENDER_ID_DISPLAY, AT_OFFENDER.LAST_NAME, AT_RELIGION.DESCRIPTION, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS, DT_IEP_BAND_LAST.IEP_LEVEL, AT_HEADER_BLOCK.STATUS_2, AT_WAIT_LIST_ACTIVITIES.DESCRIPTION AS WAIT_LIST_ACTIVITY, AT_WAIT_LIST.REFERRAL_PRIORITY, AT_WAIT_LIST.REFERRAL_DATE, CASE WHEN AT_WAIT_LIST.WAITLIST_DECISION_CODE = 'PEN' THEN 'Pending' WHEN AT_WAIT_LIST.WAITLIST_DECISION_CODE = 'APP' THEN 'Approved' WHEN AT_WAIT_LIST.WAITLIST_DECISION_CODE = 'REJ' THEN 'Rejected' WHEN AT_WAIT_LIST.WAITLIST_DECISION_CODE = 'ALL' THEN 'Allocated' ELSE AT_WAIT_LIST.WAITLIST_DECISION_CODE END AS WAITLIST_DECISION, TRUNC(CURRENT_TIMESTAMP) AS TODAY_, AT_WAIT_LIST.REFERRAL_COMMENT_TEXT, CASE WHEN AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS IN ('14FTR_ORA', '14FTRHDC_ORA', 'CUR_ORA', 'FTR/08', 'FTR_HDC', 'FTR_HDC_ORA', 'FTR_ORA', 'FTR_SCH15', 'FTRSCH15_ORA', 'HDR_ORA', 'LR', 'LR_ALP', 'LR_ALP_LASPO', 'LR_DLP', 'LR_DPP', 'LR_EPP', 'LR_ES', 'LR_HDC', 'LR_IPP', 'LR_LASPO_AR', 'LR_LASPO_DR', 'LR_LIFE', 'LR_MLP', 'LR_ORA', 'LR_SEC236A', 'LR_SEC91_ORA', 'LR_YOI', 'LR_YOI_ORA', 'FTRSCH18_ORA', 'FTRSCH18', 'LR_ALP_CDE18', 'LR_ALP_CDE21', 'LR_EDS18', 'LR_EDS21', 'LR_SOPC18', 'LR_SOPC21', 'LRSEC250_ORA', 'LR_EDSU18') THEN 'Recall' WHEN AT_IMPRISON_STATUSES.BAND_CODE = '0' THEN 'Dead' WHEN AT_IMPRISON_STATUSES.BAND_CODE = '1' THEN 'Indeterminate Sentence' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('2', '3') THEN 'Sentenced' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('4', '5', '6', '7') THEN 'Convicted Unsentenced' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('9', '10') OR AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS = 'CIV_RMD' THEN 'Civil Prisoners' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('8', '11') THEN 'Immigration Detainees' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('12', '13', '14') THEN 'Remand' WHEN AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS = 'UNKNOWN' THEN 'Unknown' ELSE 'Other' END AS LEGAL_STATUS_GROUPING, DT_INMATE_STATUS.CURR_IMPRISONMENT_STATUS FROM OMS_OWNER.OFFENDER_PROGRAM_PROFILES AT_WAIT_LIST, OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, (SELECT iep_level, description, agy_loc_id, offender_book_id, iep_date FROM (SELECT iep.iep_level, rc.description, iep.agy_loc_id, iep.offender_book_id, iep.iep_date, ROW_NUMBER() OVER (PARTITION BY iep.offender_book_id ORDER BY iep.iep_time DESC, iep.iep_level_seq DESC) AS row_seq_filter FROM oms_owner.offender_iep_levels iep LEFT OUTER JOIN oms_owner.reference_codes rc ON iep.iep_level = rc.code AND rc.domain = 'IEP_LEVEL') WHERE row_seq_filter = 1) DT_IEP_BAND_LAST, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_PROG_ESTABLISHMENT, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.OFFENDER_PROFILE_DETAILS AT_OFFENDER_RELIGION, OMS_OWNER.COURSE_ACTIVITIES AT_WAIT_LIST_ACTIVITIES, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.IMPRISONMENT_STATUSES AT_IMPRISON_STATUSES, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.PROFILE_CODES AT_RELIGION, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, (SELECT offender_book_id, curr_imprisonment_status, curr_imprison_status_desc, curr_effective_date, prev_imprisonment_status, prev_imprison_status_desc, prev_effective_date, living_unit_id, internal_location_type, no_of_occupant, FLOOR(CURRENT_TIMESTAMP - curr_effective_date) AS days FROM (SELECT offender_book_id, imprisonment_status, description, effective_date, living_unit_id, no_of_occupant, internal_location_type, row_seq_filter, MAX(row_seq_filter) OVER (PARTITION BY offender_book_id) AS max_row_seq_filter FROM (SELECT ois.offender_book_id, ois.imprisonment_status, impst.description, effective_date, ob.living_unit_id, ail.no_of_occupant, ail.internal_location_type, ROW_NUMBER() OVER (PARTITION BY ois.offender_book_id ORDER BY ois.imprison_status_seq DESC) AS row_seq_filter FROM offender_imprison_statuses ois INNER JOIN offender_bookings ob ON ois.offender_book_id = ob.offender_book_id INNER JOIN agency_internal_locations ail ON ob.living_unit_id = ail.internal_location_id INNER JOIN imprisonment_statuses impst ON ois.imprisonment_status = impst.imprisonment_status WHERE ob.active_flag = 'Y') WHERE row_seq_filter IN (1, 2)) PIVOT(MAX(imprisonment_status) AS imprisonment_status, MAX(description) AS imprison_status_desc, MAX(effective_date) AS effective_date FOR (row_seq_filter) IN (1 AS curr, 2 AS prev)) WHERE max_row_seq_filter = 2) DT_INMATE_STATUS, USER_ACCESSIBLE_CASELOADS, OMS_OWNER.OFFENDER_IMPRISON_STATUSES AT_OFFENDER_IMPRISON_STATUSES WHERE (AT_PROG_ESTABLISHMENT.AGENCY_LOCATION_TYPE = 'INST') AND (AT_WAIT_LIST.AGY_LOC_ID = AT_PROG_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WAIT_LIST.CRS_ACTY_ID = AT_WAIT_LIST_ACTIVITIES.CRS_ACTY_ID) AND (AT_WAIT_LIST.AGY_LOC_ID = AT_WAIT_LIST_ACTIVITIES.AGY_LOC_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_WAIT_LIST.OFFENDER_BOOK_ID) AND (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_RELIGION.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_RELIGION.PROFILE_TYPE (+) = 'RELF') AND (AT_OFFENDER_IMPRISON_STATUSES.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_IMPRISON_STATUSES.LATEST_STATUS = 'Y' OR AT_OFFENDER_IMPRISON_STATUSES.LATEST_STATUS IS NULL) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (DT_IEP_BAND_LAST.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS (+) = AT_OFFENDER_IMPRISON_STATUSES.IMPRISONMENT_STATUS) AND (AT_RELIGION.PROFILE_CODE (+) = AT_OFFENDER_RELIGION.PROFILE_CODE) AND (AT_RELIGION.PROFILE_TYPE (+) = AT_OFFENDER_RELIGION.PROFILE_TYPE) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (DT_INMATE_STATUS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (WING_CASELOAD_SECURITY.USERNAME = (SELECT username FROM context_)) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND AT_PROG_ESTABLISHMENT.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND AT_WAIT_LIST.OFFENDER_PROGRAM_STATUS = 'WAIT' AND AT_WAIT_LIST.WAITLIST_DECISION_CODE IN ('APP', 'PEN', 'REJ'))), dataset_ AS (SELECT OFFENDER_ID_DISPLAY, LAST_NAME, DESCRIPTION, UNIT_DESCRIPTION_4_SHORT, IMPRISONMENT_STATUS, IEP_LEVEL, STATUS_2, WAIT_LIST_ACTIVITY, REFERRAL_PRIORITY, REFERRAL_DATE, WAITLIST_DECISION, TODAY_, REFERRAL_COMMENT_TEXT, LEGAL_STATUS_GROUPING, CURR_IMPRISONMENT_STATUS, CASE WHEN V_CURRENT_RELEASE_DATE IS NULL THEN '-' ELSE V_CURRENT_RELEASE_DATE END AS V_RELEASEDATE, (TO_DATE(REFERRAL_DATE, 'DD/MM/YYYY') - TO_DATE(TODAY_, 'DD/MM/YYYY')) AS V_DAYSWAITING, 'TBD' AS V_MAX_CONCAT_CURRENT_ACTVITY, CASE WHEN V_COUNT_WORKPLACE_ALERT > 1 THEN 'Multiple Assmnts, please check NOMIS' ELSE V_WORKPLACE_ALERT END AS V_WORKPLACE_ALERT_DISPLAY, 'TBD' AS V_CONFLICT_ALERT, 'TBD' AS V_MAX_CONCAT_ACTVITY_START_D31 FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "autocomplete",
          "reportFieldType": "string",
          "display": "Establishment",
          "description": "(SELECT establishment_code from prompt_)",
          "mandatory": "true",
          "referenceType": "establishment"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DP2.DO10044",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "LAST_NAME",
            "type": "string",
            "display": "Last Name",
            "legacyId": "DP2.DO10045",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "DESCRIPTION",
            "type": "string",
            "display": "Religion Description",
            "legacyId": "DP2.DO10c29",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "UNIT_DESCRIPTION_4_SHORT",
            "type": "string",
            "display": "Unit Description 4 Short",
            "legacyId": "DP2.DO10427",
            "legacySqlClass": "column"
          },
          {
            "index": 4,
            "name": "IMPRISONMENT_STATUS",
            "type": "string",
            "display": "Main Legal Status",
            "legacyId": "DP2.DO103c7",
            "legacySqlClass": "column"
          },
          {
            "index": 5,
            "name": "IEP_LEVEL",
            "type": "string",
            "display": "IEP Level",
            "legacyId": "DP2.DO10715",
            "legacySqlClass": "column"
          },
          {
            "index": 6,
            "name": "STATUS_2",
            "type": "string",
            "display": "Security Category",
            "legacyId": "DP2.DO10265",
            "legacySqlClass": "column"
          },
          {
            "index": 7,
            "name": "WAIT_LIST_ACTIVITY",
            "type": "string",
            "display": "Wait List Activity",
            "legacyId": "DP2.DO442",
            "legacySqlClass": "column"
          },
          {
            "index": 8,
            "name": "REFERRAL_PRIORITY",
            "type": "string",
            "display": "Referral Priority",
            "legacyId": "DP2.DO43a",
            "legacySqlClass": "column"
          },
          {
            "index": 9,
            "name": "REFERRAL_DATE",
            "type": "date",
            "display": "Referral Date",
            "legacyId": "DP2.DO439",
            "legacySqlClass": "column"
          },
          {
            "index": 10,
            "name": "WAITLIST_DECISION",
            "type": "string",
            "display": "Waitlist Decision",
            "legacyId": "DP2.DO438",
            "legacySqlClass": "column"
          },
          {
            "index": 11,
            "name": "TODAY_",
            "type": "date",
            "display": "Today (Date only)",
            "legacyId": "DP2.DO10712",
            "legacySqlClass": "column"
          },
          {
            "index": 12,
            "name": "REFERRAL_COMMENT_TEXT",
            "type": "string",
            "display": "Referral Comment Text",
            "legacyId": "DP2.DO43b",
            "legacySqlClass": "column"
          },
          {
            "index": 13,
            "name": "LEGAL_STATUS_GROUPING",
            "type": "string",
            "display": "Legal Status Grouping",
            "legacyId": "DP2.DO1108a",
            "legacySqlClass": "column"
          },
          {
            "index": 14,
            "name": "CURR_IMPRISONMENT_STATUS",
            "type": "string",
            "display": "Current Legal Status",
            "legacyId": "DP2.DO10f72",
            "legacySqlClass": "column"
          },
          {
            "index": 15,
            "name": "V_RELEASEDATE",
            "type": "string",
            "display": "V_RELEASEDATE",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 16,
            "name": "V_DAYSWAITING",
            "type": "string",
            "display": "V_DAYSWAITING",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 17,
            "name": "V_MAX_CONCAT_CURRENT_ACTVITY",
            "type": "string",
            "display": "V_MAX_CONCAT_CURRENT_ACTVITY",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 18,
            "name": "V_WORKPLACE_ALERT_DISPLAY",
            "type": "string",
            "display": "V_WORKPLACE_ALERT_DISPLAY",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 19,
            "name": "V_CONFLICT_ALERT",
            "type": "string",
            "display": "V_CONFLICT_ALERT",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 20,
            "name": "V_MAX_CONCAT_ACTVITY_START_D31",
            "type": "string",
            "display": "V_MAX_CONCAT_ACTVITY_START_D31",
            "legacyId": "???",
            "legacySqlClass": "alias"
          }
        ]
      }
    },
    {
      "id": "3377239/DP4",
      "name": "Release Date",
      "description": "OR - Activities",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.OFFENDER_ID_DISPLAY, CASE WHEN NOT AT_OFFENDER_RELEASE_DETAILS.RELEASE_DATE IS NULL THEN AT_OFFENDER_RELEASE_DETAILS.RELEASE_DATE WHEN AT_OFFENDER_RELEASE_DETAILS.RELEASE_DATE IS NULL THEN DT_LAST_RELEASE_DATE.LAST_REL_DATE ELSE NULL END AS CURRENT_RELEASE_DATE FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.OFFENDER_RELEASE_DETAILS AT_OFFENDER_RELEASE_DETAILS, (SELECT AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_BOOK_ID, CASE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.HDCAD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.HDCAD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.APD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.APD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.PRRD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.PRRD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.ARD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.ARD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.ARD_CALCULATED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.ARD_CALCULATED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.CRD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.CRD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.CRD_CALCULATED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.CRD_CALCULATED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.NPD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.NPD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.NPD_CALCULATED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.NPD_CALCULATED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.MTD_OVERRIDED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.MTD_OVERRIDED_DATE WHEN NOT AT_OFFENDER_SENT_CALCULATIONS.MTD_CALCULATED_DATE IS NULL THEN AT_OFFENDER_SENT_CALCULATIONS.MTD_CALCULATED_DATE ELSE NULL END AS Last_Rel_Date, EFFECTIVE_SENTENCE_LENGTH FROM OMS_OWNER.OFFENDER_SENT_CALCULATIONS AT_OFFENDER_SENT_CALCULATIONS WHERE AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_SENT_CALCULATION_ID = (SELECT MAX(A.OFFENDER_SENT_CALCULATION_ID) FROM OMS_OWNER.OFFENDER_SENT_CALCULATIONS A WHERE AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_BOOK_ID = A.OFFENDER_BOOK_ID)) DT_LAST_RELEASE_DATE, USER_ACCESSIBLE_CASELOADS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_RELEASE_DETAILS.OFFENDER_BOOK_ID (+)) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = DT_LAST_RELEASE_DATE.OFFENDER_BOOK_ID (+)) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)))), dataset_ AS (SELECT OFFENDER_ID_DISPLAY, CURRENT_RELEASE_DATE FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "autocomplete",
          "reportFieldType": "string",
          "display": "Establishment",
          "description": "(SELECT establishment_code from prompt_)",
          "mandatory": "true",
          "referenceType": "establishment"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DP4.DO10044",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "CURRENT_RELEASE_DATE",
            "type": "date",
            "display": "Current Release Date",
            "legacyId": "DP4.DO10b29",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "3377239/DP5",
      "name": "Current Activities",
      "description": "OR - Activities",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.OFFENDER_ID_DISPLAY, AT_OFFENDER.LAST_NAME, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, V_OFFENDER_COURSE_EVENTS.DESCRIPTION, AT_PROGRAM_PROFILES.OFFENDER_START_DATE, AT_PROGRAM_SERVICES.DESCRIPTION AS ACTIVITY_TYPE, AT_SLOT_REFERENCE.DESCRIPTION AS SLOT FROM V_OFFENDER_COURSE_EVENTS, OMS_OWNER.COURSE_SCHEDULES AT_COURSE_SCHEDULES, OMS_OWNER.OFFENDER_PROGRAM_PROFILES AT_PROGRAM_PROFILES, OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.REFERENCE_CODES AT_SLOT_REFERENCE, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.COURSE_ACTIVITIES AT_COURSE_ACTIVITIES, OMS_OWNER.PROGRAM_SERVICES AT_PROGRAM_SERVICES, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, USER_ACCESSIBLE_CASELOADS WHERE (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = V_OFFENDER_COURSE_EVENTS.OFFENDER_BOOK_ID) AND (V_OFFENDER_COURSE_EVENTS.CRS_SCH_ID = AT_COURSE_SCHEDULES.CRS_SCH_ID AND V_OFFENDER_COURSE_EVENTS.CRS_ACTY_ID = AT_COURSE_SCHEDULES.CRS_ACTY_ID) AND (AT_COURSE_SCHEDULES.CRS_ACTY_ID = AT_COURSE_ACTIVITIES.CRS_ACTY_ID) AND (AT_COURSE_SCHEDULES.SLOT_CATEGORY_CODE = AT_SLOT_REFERENCE.CODE (+)) AND (AT_COURSE_ACTIVITIES.PROGRAM_ID = AT_PROGRAM_SERVICES.PROGRAM_ID) AND (AT_SLOT_REFERENCE.DOMAIN (+) = 'PA_SLOT') AND (AT_PROGRAM_PROFILES.OFF_PRGREF_ID = V_OFFENDER_COURSE_EVENTS.OFF_PRGREF_ID) AND (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (WING_CASELOAD_SECURITY.USERNAME = (SELECT username FROM context_)) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (NOT V_OFFENDER_COURSE_EVENTS.EVENT_STATUS IN ('CANC', 'SUS')) AND AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND V_OFFENDER_COURSE_EVENTS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND V_OFFENDER_COURSE_EVENTS.EVENT_DATE >= TRUNC(CURRENT_TIMESTAMP) AND (AT_PROGRAM_PROFILES.OFFENDER_END_DATE IS NULL OR AT_PROGRAM_PROFILES.OFFENDER_END_DATE >= TRUNC(CURRENT_TIMESTAMP)))), dataset_ AS (SELECT OFFENDER_ID_DISPLAY, LAST_NAME, UNIT_DESCRIPTION_4_SHORT, DESCRIPTION, OFFENDER_START_DATE, ACTIVITY_TYPE, SLOT, CASE WHEN V_COUNT_WORKPLACE_ALERT > 1 THEN 'Multiple Assmnts, please check NOMIS' ELSE V_WORKPLACE_ALERT END AS V_WORKPLACE_ALERT_DISPLAY, 'TBD' AS V_CONFLICT_ALERT, LEGAL_STATUS_GROUPING AS V_LEGAL_STATUS_GROUPING, 'TBD' AS V_MAX_CONCAT_WAIT_LIST_ACTIV31 FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "autocomplete",
          "reportFieldType": "string",
          "display": "Establishment",
          "description": "(SELECT establishment_code from prompt_)",
          "mandatory": "true",
          "referenceType": "establishment"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DP5.DO10044",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "LAST_NAME",
            "type": "string",
            "display": "Last Name",
            "legacyId": "DP5.DO10045",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "UNIT_DESCRIPTION_4_SHORT",
            "type": "string",
            "display": "Unit Description 4 Short",
            "legacyId": "DP5.DO10427",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "DESCRIPTION",
            "type": "string",
            "display": "Activity Description",
            "legacyId": "DP5.DOd6",
            "legacySqlClass": "column"
          },
          {
            "index": 4,
            "name": "OFFENDER_START_DATE",
            "type": "date",
            "display": "Offender Activity Enrollment Start Date",
            "legacyId": "DP5.DOba",
            "legacySqlClass": "column"
          },
          {
            "index": 5,
            "name": "ACTIVITY_TYPE",
            "type": "string",
            "display": "Activity Type",
            "legacyId": "DP5.DOa9",
            "legacySqlClass": "column"
          },
          {
            "index": 6,
            "name": "SLOT",
            "type": "string",
            "display": "Slot",
            "legacyId": "DP5.DOda",
            "legacySqlClass": "column"
          },
          {
            "index": 7,
            "name": "V_WORKPLACE_ALERT_DISPLAY",
            "type": "string",
            "display": "V_WORKPLACE_ALERT_DISPLAY",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 8,
            "name": "V_CONFLICT_ALERT",
            "type": "string",
            "display": "V_CONFLICT_ALERT",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 9,
            "name": "V_LEGAL_STATUS_GROUPING",
            "type": "string",
            "display": "V_LEGAL_STATUS_GROUPING",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 10,
            "name": "V_MAX_CONCAT_WAIT_LIST_ACTIV31",
            "type": "string",
            "display": "V_MAX_CONCAT_WAIT_LIST_ACTIV31",
            "legacyId": "???",
            "legacySqlClass": "alias"
          }
        ]
      }
    },
    {
      "id": "3377239/DP8",
      "name": "Current Prisoners",
      "description": "OR - Activities",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.OFFENDER_ID_DISPLAY, AT_OFFENDER.LAST_NAME, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, CASE WHEN AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS IN ('14FTR_ORA', '14FTRHDC_ORA', 'CUR_ORA', 'FTR/08', 'FTR_HDC', 'FTR_HDC_ORA', 'FTR_ORA', 'FTR_SCH15', 'FTRSCH15_ORA', 'HDR_ORA', 'LR', 'LR_ALP', 'LR_ALP_LASPO', 'LR_DLP', 'LR_DPP', 'LR_EPP', 'LR_ES', 'LR_HDC', 'LR_IPP', 'LR_LASPO_AR', 'LR_LASPO_DR', 'LR_LIFE', 'LR_MLP', 'LR_ORA', 'LR_SEC236A', 'LR_SEC91_ORA', 'LR_YOI', 'LR_YOI_ORA', 'FTRSCH18_ORA', 'FTRSCH18', 'LR_ALP_CDE18', 'LR_ALP_CDE21', 'LR_EDS18', 'LR_EDS21', 'LR_SOPC18', 'LR_SOPC21', 'LRSEC250_ORA', 'LR_EDSU18') THEN 'Recall' WHEN AT_IMPRISON_STATUSES.BAND_CODE = '0' THEN 'Dead' WHEN AT_IMPRISON_STATUSES.BAND_CODE = '1' THEN 'Indeterminate Sentence' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('2', '3') THEN 'Sentenced' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('4', '5', '6', '7') THEN 'Convicted Unsentenced' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('9', '10') OR AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS = 'CIV_RMD' THEN 'Civil Prisoners' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('8', '11') THEN 'Immigration Detainees' WHEN AT_IMPRISON_STATUSES.BAND_CODE IN ('12', '13', '14') THEN 'Remand' WHEN AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS = 'UNKNOWN' THEN 'Unknown' ELSE 'Other' END AS LEGAL_STATUS_GROUPING FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.IMPRISONMENT_STATUSES AT_IMPRISON_STATUSES, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, USER_ACCESSIBLE_CASELOADS, OMS_OWNER.OFFENDER_IMPRISON_STATUSES AT_OFFENDER_IMPRISON_STATUSES WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_IMPRISON_STATUSES.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_IMPRISON_STATUSES.LATEST_STATUS = 'Y' OR AT_OFFENDER_IMPRISON_STATUSES.LATEST_STATUS IS NULL) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_IMPRISON_STATUSES.IMPRISONMENT_STATUS (+) = AT_OFFENDER_IMPRISON_STATUSES.IMPRISONMENT_STATUS) AND (WING_CASELOAD_SECURITY.USERNAME = (SELECT username FROM context_)) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)))), dataset_ AS (SELECT OFFENDER_ID_DISPLAY, LAST_NAME, UNIT_DESCRIPTION_4_SHORT, LEGAL_STATUS_GROUPING FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "autocomplete",
          "reportFieldType": "string",
          "display": "Establishment",
          "description": "(SELECT establishment_code from prompt_)",
          "mandatory": "true",
          "referenceType": "establishment"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DP8.DO10044",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "LAST_NAME",
            "type": "string",
            "display": "Last Name",
            "legacyId": "DP8.DO10045",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "UNIT_DESCRIPTION_4_SHORT",
            "type": "string",
            "display": "Unit Description 4 Short",
            "legacyId": "DP8.DO10427",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "LEGAL_STATUS_GROUPING",
            "type": "string",
            "display": "Legal Status Grouping",
            "legacyId": "DP8.DO1108a",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "3377239/DP9",
      "name": "Workplace Alerts",
      "description": "OR - Activities",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.OFFENDER_ID_DISPLAY, AT_ALERT_TYPE_DESC.DESCRIPTION, AT_OFFENDER_ALERTS.ALERT_CODE FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.REFERENCE_CODES AT_ALERT_TYPE_DESC, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_ALERT_TYPE_DESC.CODE (+) = AT_OFFENDER_ALERTS.ALERT_CODE) AND (AT_ALERT_TYPE_DESC.DOMAIN = 'ALERT_CODE' OR AT_ALERT_TYPE_DESC.DOMAIN IS NULL) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE') AND AT_OFFENDER_ALERTS.ALERT_CODE IN ((SELECT establishment_code FROM prompt_), 'RLO', 'RME') AND AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)))), dataset_ AS (SELECT OFFENDER_ID_DISPLAY, DESCRIPTION, ALERT_CODE FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "autocomplete",
          "reportFieldType": "string",
          "display": "Establishment",
          "description": "(SELECT establishment_code from prompt_)",
          "mandatory": "true",
          "referenceType": "establishment"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DP9.DO10044",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "DESCRIPTION",
            "type": "string",
            "display": "Alert Description",
            "legacyId": "DP9.DO10097",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "ALERT_CODE",
            "type": "string",
            "display": "Alert Type Code",
            "legacyId": "DP9.DO1007e",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "3377239/DPa",
      "name": "Conflict Alert",
      "description": "OR - Activities",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.OFFENDER_ID_DISPLAY, AT_ALERT_TYPE_DESC.DESCRIPTION, AT_OFFENDER_ALERTS.ALERT_CODE FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.REFERENCE_CODES AT_ALERT_TYPE_DESC, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_ALERT_TYPE_DESC.CODE (+) = AT_OFFENDER_ALERTS.ALERT_CODE) AND (AT_ALERT_TYPE_DESC.DOMAIN = 'ALERT_CODE' OR AT_ALERT_TYPE_DESC.DOMAIN IS NULL) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)) AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE') AND AT_OFFENDER_ALERTS.ALERT_CODE = 'RCON' AND AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT establishment_code FROM prompt_) AND (USER_ACCESSIBLE_CASELOADS.USERNAME = (SELECT username FROM context_)))), dataset_ AS (SELECT OFFENDER_ID_DISPLAY, DESCRIPTION, ALERT_CODE FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "autocomplete",
          "reportFieldType": "string",
          "display": "Establishment",
          "description": "(SELECT establishment_code from prompt_)",
          "mandatory": "true",
          "referenceType": "establishment"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DPa.DO10044",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "DESCRIPTION",
            "type": "string",
            "display": "Alert Description",
            "legacyId": "DPa.DO10097",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "ALERT_CODE",
            "type": "string",
            "display": "Alert Type Code",
            "legacyId": "DPa.DO1007e",
            "legacySqlClass": "column"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": [
                "${role}",
                "ROLE_PRISONS_REPORTING_USER"
              ]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "165724.RS",
      "name": "By Prisoner",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377239/DP2",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_)"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10044"
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10045"
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10427"
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO10265"
          },
          {
            "name": "$ref:IMPRISONMENT_STATUS",
            "display": "Main Legal Status",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO103c7"
          },
          {
            "name": "$ref:LEGAL_STATUS_GROUPING",
            "display": "Legal Status Grouping",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO1108a"
          },
          {
            "name": "$ref:IEP_LEVEL",
            "display": "IEP Level",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO10715"
          },
          {
            "name": "$ref:V_RELEASEDATE",
            "display": "IEP",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(IsNull([v_Current_Release_Date]);\"-\";[v_Current_Release_Date])"
          },
          {
            "name": "$ref:WAIT_LIST_ACTIVITY",
            "display": "Wait List Activity",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO442"
          },
          {
            "name": "$ref:REFERRAL_DATE",
            "display": "Referral Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO439"
          },
          {
            "name": "$ref:REFERRAL_PRIORITY",
            "display": "Referral Priority",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO43a"
          },
          {
            "name": "$ref:V_DAYSWAITING",
            "display": "Decision",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=DaysBetween([Referral Date];[Today (Date only)])"
          },
          {
            "name": "$ref:REFERRAL_COMMENT_TEXT",
            "display": "Referral Comment Text",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO43b"
          },
          {
            "name": "$ref:V_MAX_CONCAT_CURRENT_ACTVITY",
            "display": "Comment",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[v_concat_current_activity] Where ([v_DIM_current_activity]= [v_Max_current_activity]) In ([NOMS Number])"
          },
          {
            "name": "$ref:V_WORKPLACE_ALERT_DISPLAY",
            "display": "Current Activities",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If([v_count_Workplace_alert] >1 ; \"Multiple Assmnts, please check NOMIS\";[v_Workplace_alert])"
          },
          {
            "name": "$ref:V_CONFLICT_ALERT",
            "display": "Workplace Assmnt",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number])"
          },
          {
            "name": "$ref:V_MAX_CONCAT_ACTVITY_START_D31",
            "display": "Conflict with other Prisoners?",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[v_concat_Act_Start_Date]Where ([Offender Activity Enrollment Start Date]= [v_Max_activity_start_date]) In ([NOMS Number])"
          }
        ]
      }
    },
    {
      "id": "165362.RS",
      "name": "By Activity",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377239/DP2",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_ WHERE (V_REJECTED IN (0)))"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:WAIT_LIST_ACTIVITY",
            "display": "Wait List Activity",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO442"
          },
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10044"
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10045"
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10427"
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO10265"
          },
          {
            "name": "$ref:IMPRISONMENT_STATUS",
            "display": "Main Legal Status",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO103c7"
          },
          {
            "name": "$ref:LEGAL_STATUS_GROUPING",
            "display": "Legal Status Grouping",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO1108a"
          },
          {
            "name": "$ref:IEP_LEVEL",
            "display": "IEP Level",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO10715"
          },
          {
            "name": "$ref:V_RELEASEDATE",
            "display": "=NameOf([IEP Level])",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(IsNull([v_Current_Release_Date]);\"-\";[v_Current_Release_Date])"
          },
          {
            "name": "$ref:REFERRAL_DATE",
            "display": "Referral Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO439"
          },
          {
            "name": "$ref:REFERRAL_PRIORITY",
            "display": "Referral Priority",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO43a"
          },
          {
            "name": "$ref:V_DAYSWAITING",
            "display": "Decision",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=DaysBetween([Referral Date];[Today (Date only)])"
          },
          {
            "name": "$ref:REFERRAL_COMMENT_TEXT",
            "display": "Referral Comment Text",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO43b"
          },
          {
            "name": "$ref:V_MAX_CONCAT_CURRENT_ACTVITY",
            "display": "Comment",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[v_concat_current_activity] Where ([v_DIM_current_activity]= [v_Max_current_activity]) In ([NOMS Number])"
          },
          {
            "name": "$ref:V_WORKPLACE_ALERT_DISPLAY",
            "display": "Current Activities",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If([v_count_Workplace_alert] >1 ; \"Multiple Assmnts, please check NOMIS\";[v_Workplace_alert])"
          },
          {
            "name": "$ref:V_CONFLICT_ALERT",
            "display": "Workplace Assmnt",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number])"
          }
        ]
      }
    },
    {
      "id": "166514.RS",
      "name": "Rejected",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377239/DP2",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_ WHERE (V_REJECTED IN (1)))"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10044"
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10045"
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO10427"
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO10265"
          },
          {
            "name": "$ref:IMPRISONMENT_STATUS",
            "display": "Main Legal Status",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO103c7"
          },
          {
            "name": "$ref:LEGAL_STATUS_GROUPING",
            "display": "Legal Status Grouping",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP2.DO1108a"
          },
          {
            "name": "$ref:IEP_LEVEL",
            "display": "IEP Level",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO10715"
          },
          {
            "name": "$ref:V_RELEASEDATE",
            "display": "IEP",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(IsNull([v_Current_Release_Date]);\"-\";[v_Current_Release_Date])"
          },
          {
            "name": "$ref:WAIT_LIST_ACTIVITY",
            "display": "Wait List Activity",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO442"
          },
          {
            "name": "$ref:REFERRAL_DATE",
            "display": "Referral Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO439"
          },
          {
            "name": "$ref:REFERRAL_PRIORITY",
            "display": "Referral Priority",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO43a"
          },
          {
            "name": "$ref:V_DAYSWAITING",
            "display": "Decision",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=DaysBetween([Referral Date];[Today (Date only)])"
          },
          {
            "name": "$ref:REFERRAL_COMMENT_TEXT",
            "display": "Referral Comment Text",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP2.DO43b"
          },
          {
            "name": "$ref:V_MAX_CONCAT_CURRENT_ACTVITY",
            "display": "Comment",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[v_concat_current_activity] Where ([v_DIM_current_activity]= [v_Max_current_activity]) In ([NOMS Number])"
          },
          {
            "name": "$ref:V_WORKPLACE_ALERT_DISPLAY",
            "display": "Current Activities",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If([v_count_Workplace_alert] >1 ; \"Multiple Assmnts, please check NOMIS\";[v_Workplace_alert])"
          },
          {
            "name": "$ref:V_CONFLICT_ALERT",
            "display": "Workplace Assmnt",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number])"
          }
        ]
      }
    },
    {
      "id": "166157.RS",
      "name": "Current Activities by Prisoner",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377239/DP5",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10044"
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10045"
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10427"
          },
          {
            "name": "$ref:OFFENDER_START_DATE",
            "display": "Offender Activity Enrollment Start Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP5.DOba"
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "Activity Description",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP5.DOd6"
          },
          {
            "name": "$ref:V_WORKPLACE_ALERT_DISPLAY",
            "display": "Workplace Assmnt",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If([v_count_Workplace_alert] >1 ; \"Multiple Assmnts, please check NOMIS\";[v_Workplace_alert])"
          },
          {
            "name": "$ref:V_CONFLICT_ALERT",
            "display": "Conflict with other Prisoners?",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number])"
          },
          {
            "name": "$ref:SLOT",
            "display": "Slot",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DOda"
          }
        ]
      }
    },
    {
      "id": "166404.RS",
      "name": "Current Activities by Activity",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377239/DP5",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10044"
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10045"
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10427"
          },
          {
            "name": "$ref:V_LEGAL_STATUS_GROUPING",
            "display": "Legal Status Grouping",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[Legal Status Grouping]"
          },
          {
            "name": "$ref:OFFENDER_START_DATE",
            "display": "Offender Activity Enrollment Start Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP5.DOba"
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "Activity Description",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP5.DOd6"
          },
          {
            "name": "$ref:V_MAX_CONCAT_WAIT_LIST_ACTIV31",
            "display": "Wait List Where Present",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[v_concat_wait_list_activity] Where ([v_waitlist activity]= [v_Max_wait_list_activity]) In ([NOMS Number])"
          },
          {
            "name": "$ref:V_WORKPLACE_ALERT_DISPLAY",
            "display": "Workplace Assmnt",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If([v_count_Workplace_alert] >1 ; \"Multiple Assmnts, please check NOMIS\";[v_Workplace_alert])"
          },
          {
            "name": "$ref:V_CONFLICT_ALERT",
            "display": "Conflict with other Prisoners?",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number])"
          }
        ]
      }
    },
    {
      "id": "166716.RS",
      "name": "Unemployed with Wait List",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377239/DP5",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_ WHERE V_UNEMPLOYED IS NOT NULL)"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10044"
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10045"
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": "DP5.DO10427"
          },
          {
            "name": "$ref:OFFENDER_START_DATE",
            "display": "Offender Activity Enrollment Start Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP5.DOba"
          },
          {
            "name": "$ref:V_UNEMPLOYED",
            "display": "Unemployed Activity Allocated",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If ([Activity Type] InList(\"Unemployed Prisoners\";\"Other - Unemployed Prisoners\"))Then[Activity Description]"
          },
          {
            "name": "$ref:V_MAX_CONCAT_WAIT_LIST_ACTIV31",
            "display": "Wait List Where Present",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=[v_concat_wait_list_activity] Where ([v_waitlist activity]= [v_Max_wait_list_activity]) In ([NOMS Number])"
          },
          {
            "name": "$ref:V_WORKPLACE_ALERT_DISPLAY",
            "display": "Workplace Assmnt",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If([v_count_Workplace_alert] >1 ; \"Multiple Assmnts, please check NOMIS\";[v_Workplace_alert])"
          },
          {
            "name": "$ref:V_CONFLICT_ALERT",
            "display": "Conflict with other Prisoners?",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number])"
          }
        ]
      }
    },
    {
      "id": "166799.RS",
      "name": "Unallocated No Wait List",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_)"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "summary",
        "field": []
      }
    }
  ],
  "errors": [
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_MAX_CONCAT_CURRENT_ACTVITY :: Error: =[v_concat_current_activity] Where ([v_DIM_current_activity]= [v_Max_current_activity]) In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:89",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_CONFLICT_ALERT :: Error: =If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:55",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_MAX_CONCAT_ACTVITY_START_D31 :: Error: =[v_concat_Act_Start_Date]Where ([Offender Activity Enrollment Start Date]= [v_Max_activity_start_date]) In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:106",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_MAX_CONCAT_CURRENT_ACTVITY :: Error: =[v_concat_current_activity] Where ([v_DIM_current_activity]= [v_Max_current_activity]) In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:89",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_CONFLICT_ALERT :: Error: =If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:55",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_MAX_CONCAT_ACTVITY_START_D31 :: Error: =[v_concat_Act_Start_Date]Where ([Offender Activity Enrollment Start Date]= [v_Max_activity_start_date]) In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:106",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_CONFLICT_ALERT :: Error: =If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:55",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_MAX_CONCAT_WAIT_LIST_ACTIV31 :: Error: =[v_concat_wait_list_activity] Where ([v_waitlist activity]= [v_Max_wait_list_activity]) In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:90",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_CONFLICT_ALERT :: Error: =If(Count([Conflict Alert].[Alert Type Code]) =1;\"Y\") In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:55",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_MAX_CONCAT_WAIT_LIST_ACTIV31 :: Error: =[v_concat_wait_list_activity] Where ([v_waitlist activity]= [v_Max_wait_list_activity]) In ([NOMS Number]) ==> Error: Expected end of input but \"I\" found.\n at undefined:1:90",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations unable to append column : V_UNEMPLOYED :: Error: argument 'sql': 'NoneType' object cannot be converted to 'PyString'",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "instance.report[6] requires property \"dataset\"",
      "entityId": "Fp4JhgBEOAEAcQgHAAAnLxcAACJIAGE1",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "Report field V_UNEMPLOYED does not have corresponding dataset schema field",
      "entityId": "166716.RS",
      "entityType": "variant"
    },
    {
      "type": "schema",
      "error": "Report Variant 166799.RS does not have corresponding dataset undefined",
      "entityId": "166799.RS",
      "entityType": "variant"
    },
    {
      "type": "sqlQuery",
      "error": "Error: ORA-00904: \"V_WORKPLACE_ALERT\": invalid identifier\nHelp: https://docs.oracle.com/error-help/db/ora-00904/",
      "entityId": "3377239/DP2",
      "entityType": "dataset"
    },
    {
      "type": "sqlQuery",
      "error": "Error: ORA-00904: \"LEGAL_STATUS_GROUPING\": invalid identifier\nHelp: https://docs.oracle.com/error-help/db/ora-00904/",
      "entityId": "3377239/DP5",
      "entityType": "dataset"
    }
  ]
}