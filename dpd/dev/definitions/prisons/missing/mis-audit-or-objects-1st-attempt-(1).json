{
  "id": "klf7Xl0ABI.jK7EA7f8AFE.rcVQ",
  "name": "MIS audit or objects 1st attempt (1)",
  "metadata": {
    "version": "1.0.0",
    "tags": []
  },
  "description": "What are the 10 least viewed, edited, and refreshed documents?",
  "datasource": [
    {
      "id": "bodmis",
      "name": "BODMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "bodmis"
    }
  ],
  "dataset": [
    {
      "id": "undefined/DP6",
      "name": "Bottom Documents by Views",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DERIVED_DOCUMENT_NAME.Detail_Text, DERIVED_OBJECT_PATH.Detail_Text, DERIVED_OBJECT_NAME.Detail_Text FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 8)) DERIVED_DOCUMENT_NAME, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 43)) DERIVED_OBJECT_PATH, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 3)) DERIVED_OBJECT_NAME, AUDIT_EVENT WHERE (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_NAME.Event_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_NAME.Server_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_DOCUMENT_NAME.Event_ID AND AUDIT_EVENT.Server_CUID = DERIVED_DOCUMENT_NAME.Server_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_PATH.EVENT_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_PATH.SERVER_CUID) AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('03-10-2016 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('10-10-2016 00:00:00', 'DD-MM-YYYY HH24:MI:SS')), dataset_ AS (SELECT DETAIL_TEXT, DETAIL_TEXT, DETAIL_TEXT FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "",
            "legacyId": "???",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "",
            "legacyId": "???",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "",
            "legacyId": "???",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "undefined/DP8",
      "name": "Bottom Documents by Refreshes",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DERIVED_OBJECT_NAME.Detail_Text, DERIVED_OBJECT_TYPE.Detail_Text AS OBJECT_TYPE FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 3)) DERIVED_OBJECT_NAME, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 50)) DERIVED_OBJECT_TYPE, AUDIT_EVENT WHERE (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_NAME.Event_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_NAME.Server_CUID) AND (AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_TYPE.SERVER_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_TYPE.EVENT_ID) AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('03-10-2016 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('10-10-2016 00:00:00', 'DD-MM-YYYY HH24:MI:SS')), dataset_ AS (SELECT DETAIL_TEXT, OBJECT_TYPE FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "Object Name",
            "legacyId": "DP8.DO3e",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "OBJECT_TYPE",
            "type": "string",
            "display": "Object Type",
            "legacyId": "DP8.DO72",
            "legacySqlClass": "column"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": [
                "${role}",
                "ROLE_PRISONS_REPORTING_USER"
              ]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "26051.RS",
      "name": "By Times Read",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "undefined/DP6",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_ WHERE V_OBJECT <> 'no')"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:DP6_DO40",
            "display": "",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": ""
          },
          {
            "name": "$ref:DP6_DO73",
            "display": "",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": ""
          },
          {
            "name": "$ref:DP6_DO3E",
            "display": "",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacyId": ""
          }
        ]
      }
    }
  ],
  "errors": [
    {
      "type": "schema",
      "error": "instance.report[0].specification.template is not one of enum values: list,list-section,list-tab,summary,summary-section,parent-child,parent-child-section",
      "entityId": "klf7Xl0ABI.jK7EA7f8AFE.rcVQ",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "Report field DP6_DO40 does not have corresponding dataset schema field",
      "entityId": "26051.RS",
      "entityType": "variant"
    },
    {
      "type": "schema",
      "error": "Report field DP6_DO73 does not have corresponding dataset schema field",
      "entityId": "26051.RS",
      "entityType": "variant"
    },
    {
      "type": "schema",
      "error": "Report field DP6_DO3E does not have corresponding dataset schema field",
      "entityId": "26051.RS",
      "entityType": "variant"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP6",
      "entityType": "dataset"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP8",
      "entityType": "dataset"
    }
  ]
}