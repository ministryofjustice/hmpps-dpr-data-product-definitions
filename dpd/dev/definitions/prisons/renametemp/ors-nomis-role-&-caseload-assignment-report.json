{
  "id": "okXi1joACQJTQ5AAIgGD8LAV8Ys",
  "name": "ORS NOMIS Role & Caseload Assignment Report",
  "description": "This report lists changes in access to Roles and Caseloads which occurred during a default period of the last 7 days. The default period can be changed by the end user at runtime.<br/>CAD0004 - v00.00.03",
  "metadata": {
    "version": "1.0.0",
    "tags": [
      "CAD0004  v00.00.03 DROP9.9"
    ]
  },
  "datasource": [
    {
      "id": "nomis",
      "name": "NOMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "nomis"
    }
  ],
  "dataset": [
    {
      "id": "3375624/DP0",
      "name": "Caseload Assignment",
      "description": "C-NOMIS Audit",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT DISTINCT AUDITREF_STAFF_MBRS.LAST_NAME, AUDITREF_STAFF_MBRS.FIRST_NAME, AUDITREF_STAFF_USER_ACCS.USERNAME, AUDITREF_STAFF_USER_ACCS.STAFF_USER_TYPE, AUDITREF.CASELOADS.CASELOAD_ID, TRUNC(AUDITDATA.AUDIT_TABLE.AUDIT_TIMESTAMP) AS AT_DATE_OF_CHANGE_, TO_CHAR(AUDITDATA.AUDIT_TABLE.AUDIT_TIMESTAMP, 'HH24:MI:SS') AS AT_TIME_OF_CHANGE_, CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 'Assigned' WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'DELETE' THEN 'De-assigned' ELSE 'Changed' END AS AT_ASSIGNMENT_DE_ASSIGNMENT_37, AUDITREF.STAFF_MEMBERS.FIRST_NAME AS NOMIS_USER_FIRST_NAME, AUDITREF.STAFF_USER_ACCOUNTS.WORKING_CASELOAD_ID, AUDITREF.STAFF_MEMBERS.LAST_NAME AS NOMIS_USER_LAST_NAME, COALESCE(AUDITREF.STAFF_USER_ACCOUNTS.STAFF_USER_TYPE, 'N/A') AS NOMIS_USER_ACCOUNT_TYPE, COALESCE(AUDITREF.STAFF_USER_ACCOUNTS.USERNAME, 'N/A') AS NOMIS_USER_ACCOUNT_NAME FROM AUDITDATA.AUDIT_TABLE, AUDITREF.STAFF_MEMBERS AUDITREF_STAFF_MBRS, AUDITREF.STAFF_MEMBERS, AUDITREF.STAFF_USER_ACCOUNTS AUDITREF_STAFF_USER_ACCS, AUDITREF.STAFF_USER_ACCOUNTS, AUDITREF.CASELOADS, AUDITDATA.AUDIT_COLUMN AUDIT_COLUMN_UCLOAD, AUDITDATA.AUDIT_COLUMN AUDIT_COLUMN_CLOAD_ROLE_USR WHERE (AUDITREF.STAFF_USER_ACCOUNTS.STAFF_ID = AUDITREF.STAFF_MEMBERS.STAFF_ID) AND (AUDITREF.STAFF_USER_ACCOUNTS.USERNAME = AUDITDATA.AUDIT_TABLE.AUDIT_USER_ID) AND (AUDIT_COLUMN_UCLOAD.LCR_COLUMN_NAME = 'caseload_id') AND (AUDIT_COLUMN_UCLOAD.AUDIT_TABLE_SEQ = AUDITDATA.AUDIT_TABLE.AUDIT_TABLE_SEQ AND AUDIT_COLUMN_UCLOAD.LCR_SOURCE_TIME = AUDITDATA.AUDIT_TABLE.LCR_SOURCE_TIME AND AUDIT_COLUMN_UCLOAD.LCR_COLUMN_OLD_NEW_IND = CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 1 ELSE 0 END) AND (auditdata.GETSTRING(AUDIT_COLUMN_UCLOAD.LCR_COLUMN_VALUE) = AUDITREF.CASELOADS.CASELOAD_ID) AND (AUDITREF_STAFF_USER_ACCS.STAFF_ID = AUDITREF_STAFF_MBRS.STAFF_ID) AND (AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_COLUMN_NAME = 'username') AND (AUDITDATA.AUDIT_TABLE.AUDIT_TABLE_SEQ = AUDIT_COLUMN_CLOAD_ROLE_USR.AUDIT_TABLE_SEQ AND AUDITDATA.AUDIT_TABLE.LCR_SOURCE_TIME = AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_SOURCE_TIME AND CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 1 ELSE 0 END = AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_COLUMN_OLD_NEW_IND) AND (auditdata.GETSTRING(AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_COLUMN_VALUE) = AUDITREF_STAFF_USER_ACCS.USERNAME) AND ((AUDITDATA.AUDIT_TABLE.LCR_OBJECT_NAME = 'USER_ACCESSIBLE_CASELOADS') AND (TRUNC(AUDITDATA.AUDIT_TABLE.AUDIT_TIMESTAMP) >= TRUNC(CURRENT_TIMESTAMP - (SELECT UNKNOWN_PARAMETER FROM prompt_ /* = #Prompt('No. of days before Current Day','N',,,,Not_Persistent,{'7'},,) */))))), dataset_ AS (SELECT LAST_NAME, FIRST_NAME, USERNAME, STAFF_USER_TYPE, CASELOAD_ID, AT_DATE_OF_CHANGE_, AT_TIME_OF_CHANGE_, AT_ASSIGNMENT_DE_ASSIGNMENT_37, NOMIS_USER_FIRST_NAME, WORKING_CASELOAD_ID, NOMIS_USER_LAST_NAME, NOMIS_USER_ACCOUNT_TYPE, NOMIS_USER_ACCOUNT_NAME, 'TBD' AS V_TIME_OF_CASELOAD_CHANGE FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "unknown_parameter",
          "filterType": "text",
          "reportFieldType": "string",
          "display": "No. of days before Current Day",
          "description": "@Prompt('No. of days before Current Day','N',,,,Not_Persistent,{'7'},,)",
          "mandatory": "true"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "LAST_NAME",
            "type": "string",
            "display": "AT NOMIS User Last Name",
            "legacyId": "DP0.DO16a",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "FIRST_NAME",
            "type": "string",
            "display": "AT NOMIS User First Name",
            "legacyId": "DP0.DO16b",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "USERNAME",
            "type": "string",
            "display": "AT NOMIS User Account Name",
            "legacyId": "DP0.DO16c",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "STAFF_USER_TYPE",
            "type": "string",
            "display": "AT NOMIS User Account Type",
            "legacyId": "DP0.DO16d",
            "legacySqlClass": "column"
          },
          {
            "index": 4,
            "name": "CASELOAD_ID",
            "type": "string",
            "display": "AT Caseload Id",
            "legacyId": "DP0.DO16e",
            "legacySqlClass": "column"
          },
          {
            "index": 5,
            "name": "AT_DATE_OF_CHANGE_",
            "type": "date",
            "display": "AT Date of Change (DD/MM/YYYY)",
            "legacyId": "DP0.DO15f",
            "legacySqlClass": "column"
          },
          {
            "index": 6,
            "name": "AT_TIME_OF_CHANGE_",
            "type": "string",
            "display": "AT Time of Change (HH24:MI:SS)",
            "legacyId": "DP0.DO160",
            "legacySqlClass": "column"
          },
          {
            "index": 7,
            "name": "AT_ASSIGNMENT_DE_ASSIGNMENT_37",
            "type": "string",
            "display": "AT Assignment De-Assignment Indicator",
            "legacyId": "DP0.DO165",
            "legacySqlClass": "column"
          },
          {
            "index": 8,
            "name": "NOMIS_USER_FIRST_NAME",
            "type": "string",
            "display": "NOMIS User First Name",
            "legacyId": "DP0.DO132",
            "legacySqlClass": "column"
          },
          {
            "index": 9,
            "name": "WORKING_CASELOAD_ID",
            "type": "string",
            "display": "NOMIS User Working Caseload",
            "legacyId": "DP0.DO135",
            "legacySqlClass": "column"
          },
          {
            "index": 10,
            "name": "NOMIS_USER_LAST_NAME",
            "type": "string",
            "display": "NOMIS User Last Name",
            "legacyId": "DP0.DO130",
            "legacySqlClass": "column"
          },
          {
            "index": 11,
            "name": "NOMIS_USER_ACCOUNT_TYPE",
            "type": "string",
            "display": "NOMIS User Account Type",
            "legacyId": "DP0.DO134",
            "legacySqlClass": "column"
          },
          {
            "index": 12,
            "name": "NOMIS_USER_ACCOUNT_NAME",
            "type": "string",
            "display": "NOMIS User Account Name",
            "legacyId": "DP0.DO133",
            "legacySqlClass": "column"
          },
          {
            "index": 13,
            "name": "V_TIME_OF_CASELOAD_CHANGE",
            "type": "string",
            "display": "V_TIME_OF_CASELOAD_CHANGE",
            "legacyId": "???",
            "legacySqlClass": "alias"
          }
        ]
      }
    },
    {
      "id": "3375624/DP3",
      "name": "Caseload Role Assignment",
      "description": "C-NOMIS Audit",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT DISTINCT AUDITREF_STAFF_MBRS.LAST_NAME, AUDITREF_STAFF_MBRS.FIRST_NAME, AUDITREF_STAFF_USER_ACCS.USERNAME, AUDITREF_STAFF_USER_ACCS.STAFF_USER_TYPE, AUDITREF_UAC_CASELOAD.CASELOAD_ID, TRUNC(AUDITDATA.AUDIT_TABLE.AUDIT_TIMESTAMP) AS AT_DATE_OF_CHANGE_, TO_CHAR(AUDITDATA.AUDIT_TABLE.AUDIT_TIMESTAMP, 'HH24:MI:SS') AS AT_TIME_OF_CHANGE_, AUDITREF.OMS_ROLES.ROLE_NAME, CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 'Assigned' WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'DELETE' THEN 'De-assigned' ELSE 'Changed' END AS AT_ASSIGNMENT_DE_ASSIGNMENT_37, AUDITREF.STAFF_MEMBERS.FIRST_NAME AS NOMIS_USER_FIRST_NAME, AUDITREF.STAFF_MEMBERS.LAST_NAME AS NOMIS_USER_LAST_NAME, COALESCE(AUDITREF.STAFF_USER_ACCOUNTS.STAFF_USER_TYPE, 'N/A') AS NOMIS_USER_ACCOUNT_TYPE, COALESCE(AUDITREF.STAFF_USER_ACCOUNTS.USERNAME, 'N/A') AS NOMIS_USER_ACCOUNT_NAME, AUDITREF.STAFF_USER_ACCOUNTS.WORKING_CASELOAD_ID FROM AUDITDATA.AUDIT_TABLE, AUDITREF.STAFF_MEMBERS AUDITREF_STAFF_MBRS, AUDITREF.STAFF_MEMBERS, AUDITREF.STAFF_USER_ACCOUNTS AUDITREF_STAFF_USER_ACCS, AUDITREF.STAFF_USER_ACCOUNTS, AUDITREF.CASELOADS AUDITREF_UAC_CASELOAD, AUDITREF.OMS_ROLES, AUDITREF.USER_ACCESSIBLE_CASELOADS, AUDITDATA.AUDIT_COLUMN AUDIT_COLUMN_UCLOAD, AUDITDATA.AUDIT_COLUMN AUDIT_COLUMN_CLOAD_ROLE_USR, AUDITDATA.AUDIT_COLUMN AUDIT_COLUMN_CLROLE WHERE (AUDITREF.STAFF_USER_ACCOUNTS.STAFF_ID = AUDITREF.STAFF_MEMBERS.STAFF_ID) AND (AUDITREF.STAFF_USER_ACCOUNTS.USERNAME = AUDITDATA.AUDIT_TABLE.AUDIT_USER_ID) AND (AUDIT_COLUMN_UCLOAD.LCR_COLUMN_NAME = 'caseload_id') AND (AUDIT_COLUMN_UCLOAD.AUDIT_TABLE_SEQ = AUDITDATA.AUDIT_TABLE.AUDIT_TABLE_SEQ AND AUDIT_COLUMN_UCLOAD.LCR_SOURCE_TIME = AUDITDATA.AUDIT_TABLE.LCR_SOURCE_TIME AND AUDIT_COLUMN_UCLOAD.LCR_COLUMN_OLD_NEW_IND = CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 1 ELSE 0 END) AND (AUDITREF_STAFF_USER_ACCS.STAFF_ID = AUDITREF_STAFF_MBRS.STAFF_ID) AND (auditdata.GETSTRING(AUDIT_COLUMN_UCLOAD.LCR_COLUMN_VALUE) = AUDITREF.USER_ACCESSIBLE_CASELOADS.CASELOAD_ID) AND (AUDITDATA.AUDIT_TABLE.AUDIT_TABLE_SEQ = AUDIT_COLUMN_CLROLE.AUDIT_TABLE_SEQ AND AUDITDATA.AUDIT_TABLE.LCR_SOURCE_TIME = AUDIT_COLUMN_CLROLE.LCR_SOURCE_TIME AND CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 1 ELSE 0 END = AUDIT_COLUMN_CLROLE.LCR_COLUMN_OLD_NEW_IND) AND (AUDIT_COLUMN_CLROLE.LCR_COLUMN_NAME = 'role_id') AND (AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_COLUMN_NAME = 'username') AND (AUDITDATA.AUDIT_TABLE.AUDIT_TABLE_SEQ = AUDIT_COLUMN_CLOAD_ROLE_USR.AUDIT_TABLE_SEQ AND AUDITDATA.AUDIT_TABLE.LCR_SOURCE_TIME = AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_SOURCE_TIME AND CASE WHEN AUDITDATA.AUDIT_TABLE.LCR_COMMAND_TYPE = 'INSERT' THEN 1 ELSE 0 END = AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_COLUMN_OLD_NEW_IND) AND (AUDITREF.USER_ACCESSIBLE_CASELOADS.CASELOAD_ID = AUDITREF_UAC_CASELOAD.CASELOAD_ID) AND (auditdata.GETNUMBER(AUDIT_COLUMN_CLROLE.LCR_COLUMN_VALUE) = AUDITREF.OMS_ROLES.ROLE_ID) AND (auditdata.GETSTRING(AUDIT_COLUMN_CLOAD_ROLE_USR.LCR_COLUMN_VALUE) = AUDITREF_STAFF_USER_ACCS.USERNAME) AND ((AUDITDATA.AUDIT_TABLE.LCR_OBJECT_NAME = 'USER_CASELOAD_ROLES') AND (TRUNC(AUDITDATA.AUDIT_TABLE.AUDIT_TIMESTAMP) >= TRUNC(CURRENT_TIMESTAMP - (SELECT UNKNOWN_PARAMETER FROM prompt_ /* = #Prompt('No. of days before Current Day','N',,,,Not_Persistent,{'7'},,) */))))), dataset_ AS (SELECT LAST_NAME, FIRST_NAME, USERNAME, STAFF_USER_TYPE, CASELOAD_ID, AT_DATE_OF_CHANGE_, AT_TIME_OF_CHANGE_, ROLE_NAME, AT_ASSIGNMENT_DE_ASSIGNMENT_37, NOMIS_USER_FIRST_NAME, NOMIS_USER_LAST_NAME, NOMIS_USER_ACCOUNT_TYPE, NOMIS_USER_ACCOUNT_NAME, WORKING_CASELOAD_ID, 'TBD' AS V_TIME_OF_ROLE_CHANGE FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "unknown_parameter",
          "filterType": "text",
          "reportFieldType": "string",
          "display": "No. of days before Current Day",
          "description": "@Prompt('No. of days before Current Day','N',,,,Not_Persistent,{'7'},,)",
          "mandatory": "true"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "LAST_NAME",
            "type": "string",
            "display": "AT NOMIS User Last Name",
            "legacyId": "DP3.DO16a",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "FIRST_NAME",
            "type": "string",
            "display": "AT NOMIS User First Name",
            "legacyId": "DP3.DO16b",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "USERNAME",
            "type": "string",
            "display": "AT NOMIS User Account Name",
            "legacyId": "DP3.DO16c",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "STAFF_USER_TYPE",
            "type": "string",
            "display": "AT NOMIS User Account Type",
            "legacyId": "DP3.DO16d",
            "legacySqlClass": "column"
          },
          {
            "index": 4,
            "name": "CASELOAD_ID",
            "type": "string",
            "display": "AT Affected Caseload Id",
            "legacyId": "DP3.DO19a",
            "legacySqlClass": "column"
          },
          {
            "index": 5,
            "name": "AT_DATE_OF_CHANGE_",
            "type": "date",
            "display": "AT Date of Change (DD/MM/YYYY)",
            "legacyId": "DP3.DO15f",
            "legacySqlClass": "column"
          },
          {
            "index": 6,
            "name": "AT_TIME_OF_CHANGE_",
            "type": "string",
            "display": "AT Time of Change (HH24:MI:SS)",
            "legacyId": "DP3.DO160",
            "legacySqlClass": "column"
          },
          {
            "index": 7,
            "name": "ROLE_NAME",
            "type": "string",
            "display": "AT Role Name",
            "legacyId": "DP3.DO161",
            "legacySqlClass": "column"
          },
          {
            "index": 8,
            "name": "AT_ASSIGNMENT_DE_ASSIGNMENT_37",
            "type": "string",
            "display": "AT Assignment De-Assignment Indicator",
            "legacyId": "DP3.DO165",
            "legacySqlClass": "column"
          },
          {
            "index": 9,
            "name": "NOMIS_USER_FIRST_NAME",
            "type": "string",
            "display": "NOMIS User First Name",
            "legacyId": "DP3.DO132",
            "legacySqlClass": "column"
          },
          {
            "index": 10,
            "name": "NOMIS_USER_LAST_NAME",
            "type": "string",
            "display": "NOMIS User Last Name",
            "legacyId": "DP3.DO130",
            "legacySqlClass": "column"
          },
          {
            "index": 11,
            "name": "NOMIS_USER_ACCOUNT_TYPE",
            "type": "string",
            "display": "NOMIS User Account Type",
            "legacyId": "DP3.DO134",
            "legacySqlClass": "column"
          },
          {
            "index": 12,
            "name": "NOMIS_USER_ACCOUNT_NAME",
            "type": "string",
            "display": "NOMIS User Account Name",
            "legacyId": "DP3.DO133",
            "legacySqlClass": "column"
          },
          {
            "index": 13,
            "name": "WORKING_CASELOAD_ID",
            "type": "string",
            "display": "NOMIS User Working Caseload",
            "legacyId": "DP3.DO135",
            "legacySqlClass": "column"
          },
          {
            "index": 14,
            "name": "V_TIME_OF_ROLE_CHANGE",
            "type": "string",
            "display": "V_TIME_OF_ROLE_CHANGE",
            "legacyId": "???",
            "legacySqlClass": "alias"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": [
                "${role}",
                "ROLE_PRISONS_REPORTING_USER"
              ]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "137587.RS",
      "name": "NOMIS Caseload Assignment",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3375624/DP0",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:LAST_NAME",
            "display": "AT NOMIS User Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO16a"
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "AT NOMIS User First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO16b"
          },
          {
            "name": "$ref:USERNAME",
            "display": "AT NOMIS User Account Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO16c"
          },
          {
            "name": "$ref:AT_DATE_OF_CHANGE_",
            "display": "AT Date of Change (DD/MM/YYYY)",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO15f"
          },
          {
            "name": "$ref:V_TIME_OF_CASELOAD_CHANGE",
            "display": "Time of Change  to User Account",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=Left([Caseload Assignment].[AT Time of Change (HH24:MI:SS)];5)"
          },
          {
            "name": "$ref:STAFF_USER_TYPE",
            "display": "AT NOMIS User Account Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO16d"
          },
          {
            "name": "$ref:CASELOAD_ID",
            "display": "AT Caseload Id",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO16e"
          },
          {
            "name": "$ref:AT_ASSIGNMENT_DE_ASSIGNMENT_37",
            "display": "AT Assignment De-Assignment Indicator",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO165"
          },
          {
            "name": "$ref:NOMIS_USER_LAST_NAME",
            "display": "NOMIS User Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO130"
          },
          {
            "name": "$ref:NOMIS_USER_FIRST_NAME",
            "display": "NOMIS User First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO132"
          },
          {
            "name": "$ref:NOMIS_USER_ACCOUNT_NAME",
            "display": "NOMIS User Account Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO133"
          },
          {
            "name": "$ref:NOMIS_USER_ACCOUNT_TYPE",
            "display": "NOMIS User Account Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO134"
          },
          {
            "name": "$ref:WORKING_CASELOAD_ID",
            "display": "NOMIS User Working Caseload",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP0.DO135"
          }
        ]
      }
    },
    {
      "id": "137885.RS",
      "name": "NOMIS Role Assignment",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3375624/DP3",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:LAST_NAME",
            "display": "AT NOMIS User Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO16a"
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "AT NOMIS User First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO16b"
          },
          {
            "name": "$ref:USERNAME",
            "display": "AT NOMIS User Account Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO16c"
          },
          {
            "name": "$ref:AT_DATE_OF_CHANGE_",
            "display": "AT Date of Change (DD/MM/YYYY)",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO15f"
          },
          {
            "name": "$ref:V_TIME_OF_ROLE_CHANGE",
            "display": "Time of Change to User Account",
            "formula": "",
            "visible": "true",
            "sortable": false,
            "defaultsort": false,
            "legacySql": "=Left([Caseload Role Assignment].[AT Time of Change (HH24:MI:SS)];5)"
          },
          {
            "name": "$ref:STAFF_USER_TYPE",
            "display": "AT NOMIS User Account Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO16d"
          },
          {
            "name": "$ref:CASELOAD_ID",
            "display": "AT Affected Caseload Id",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO19a"
          },
          {
            "name": "$ref:ROLE_NAME",
            "display": "AT Role Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO161"
          },
          {
            "name": "$ref:AT_ASSIGNMENT_DE_ASSIGNMENT_37",
            "display": "AT Assignment De-Assignment Indicator",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO165"
          },
          {
            "name": "$ref:NOMIS_USER_LAST_NAME",
            "display": "NOMIS User Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO130"
          },
          {
            "name": "$ref:NOMIS_USER_FIRST_NAME",
            "display": "NOMIS User First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO132"
          },
          {
            "name": "$ref:NOMIS_USER_ACCOUNT_NAME",
            "display": "NOMIS User Account Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO133"
          },
          {
            "name": "$ref:NOMIS_USER_ACCOUNT_TYPE",
            "display": "NOMIS User Account Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO134"
          },
          {
            "name": "$ref:WORKING_CASELOAD_ID",
            "display": "NOMIS User Working Caseload",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP3.DO135"
          }
        ]
      }
    }
  ],
  "errors": [
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_TIME_OF_CASELOAD_CHANGE :: Error: =Left([Caseload Assignment].[AT Time of Change (HH24:MI:SS)];5) ==> Error: Expected expression but \"=\" found.\n at undefined:1:1",
      "entityId": "okXi1joACQJTQ5AAIgGD8LAV8Ys",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_TIME_OF_CASELOAD_CHANGE :: Error: =Left([Caseload Assignment].[AT Time of Change (HH24:MI:SS)];5) ==> Error: Expected expression but \"=\" found.\n at undefined:1:1",
      "entityId": "okXi1joACQJTQ5AAIgGD8LAV8Ys",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::resolveCTEs parse error for : $ref:V_TIME_OF_ROLE_CHANGE :: Error: =Left([Caseload Role Assignment].[AT Time of Change (HH24:MI:SS)];5) ==> Error: Expected expression but \"=\" found.\n at undefined:1:1",
      "entityId": "okXi1joACQJTQ5AAIgGD8LAV8Ys",
      "entityType": "dpd"
    },
    {
      "type": "enhanced",
      "error": "dataset::injectCalculations parse error for : $ref:V_TIME_OF_ROLE_CHANGE :: Error: =Left([Caseload Role Assignment].[AT Time of Change (HH24:MI:SS)];5) ==> Error: Expected expression but \"=\" found.\n at undefined:1:1",
      "entityId": "okXi1joACQJTQ5AAIgGD8LAV8Ys",
      "entityType": "dpd"
    },
    {
      "type": "sqlQuery",
      "error": "Error: ORA-00942: table or view does not exist\nHelp: https://docs.oracle.com/error-help/db/ora-00942/",
      "entityId": "3375624/DP0",
      "entityType": "dataset"
    },
    {
      "type": "sqlQuery",
      "error": "Error: ORA-00942: table or view does not exist\nHelp: https://docs.oracle.com/error-help/db/ora-00942/",
      "entityId": "3375624/DP3",
      "entityType": "dataset"
    }
  ]
}