{
  "id": "klf.X4QABAjPZusA1v8AFE.rcVQ",
  "name": "MIS audit or objects 3rd attempt",
  "metadata": {
    "version": "1.0.0",
    "tags": []
  },
  "description": "What are the 10 least viewed, edited, and refreshed documents?",
  "datasource": [
    {
      "id": "bodmis",
      "name": "BODMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "bodmis"
    }
  ],
  "dataset": [
    {
      "id": "undefined/DP6",
      "name": "Bottom Documents by Views",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DISTINCT DERIVED_OBJECT_PATH.Detail_Text, DERIVED_OBJECT_NAME.Detail_Text AS OBJECT_NAME, DERIVED_DOCUMENTOPERATION_NAME.Detail_Text AS DOCUMENT_NAME, DERIVED_DOCUMENTOPERATION_NAME.Object_Type, EVENT_TYPE.Event_Type_Description, AUDIT_EVENT.Start_Timestamp FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 43)) DERIVED_OBJECT_PATH, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 3)) DERIVED_OBJECT_NAME, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Object_Type, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (((AUDIT_EVENT.Event_Type_ID IN (196609, 196610, 327681, 327683, 327682, 327687, 327688) AND AUDIT_DETAIL.Detail_Type_ID = 3) OR (AUDIT_EVENT.Event_Type_ID IN (11, 9, 19, 41, 43) AND AUDIT_DETAIL.Detail_Type_ID = 8)) AND (AUDIT_EVENT.Object_Type IN ('Crystal Reports', 'Web Intelligence', 'Desktop Intelligence')))) DERIVED_DOCUMENTOPERATION_NAME, EVENT_TYPE, AUDIT_EVENT, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_DETAIL.Detail_Type_ID, AUDIT_EVENT.Event_Type_ID, EVENT_TYPE.Event_Type_Description, AUDIT_EVENT.Object_Type, AUDIT_DETAIL.Detail_Text AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL, EVENT_TYPE WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (EVENT_TYPE.Event_Type_ID = AUDIT_EVENT.Event_Type_ID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (((AUDIT_EVENT.Event_Type_ID IN (196609, 196610) AND AUDIT_DETAIL.Detail_Type_ID IN (43, 90, 3)) OR (AUDIT_EVENT.Event_Type_ID IN (11, 9) AND AUDIT_DETAIL.Detail_Type_ID IN (43, 90, 8)) OR (AUDIT_EVENT.Event_Type_ID = 43 AND AUDIT_DETAIL.Detail_Type_ID IN (43, 90, 8, 23, 24)) OR (AUDIT_EVENT.Event_Type_ID IN (41, 22, 19) AND AUDIT_DETAIL.Detail_Type_ID IN (43, 90, 8, 19)) OR (AUDIT_EVENT.Event_Type_ID IN (327681, 327682, 327683) AND AUDIT_DETAIL.Detail_Type_ID IN (43, 90, 3)) OR (AUDIT_EVENT.Event_Type_ID IN (327687, 327688) AND AUDIT_DETAIL.Detail_Type_ID IN (43, 90, 3, 9, 65, 74, 73, 75, 68, 76, 70, 67, 69))) AND ((AUDIT_EVENT.Object_Type IN ('Crystal Reports', 'Web Intelligence', 'Desktop Intelligence'))))) DERIVED_DOCUMENT_OPERATION WHERE (AUDIT_EVENT.Event_Type_ID = EVENT_TYPE.Event_Type_ID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_NAME.Event_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_NAME.Server_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_PATH.EVENT_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_PATH.SERVER_CUID) AND (AUDIT_EVENT.Server_CUID = DERIVED_DOCUMENT_OPERATION.SERVER_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_DOCUMENT_OPERATION.EVENT_ID) AND (DERIVED_DOCUMENT_OPERATION.SERVER_CUID = DERIVED_DOCUMENTOPERATION_NAME.SERVER_CUID) AND (DERIVED_DOCUMENT_OPERATION.EVENT_ID = DERIVED_DOCUMENTOPERATION_NAME.EVENT_ID) AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('13-02-2017 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('14-02-2017 00:00:00', 'DD-MM-YYYY HH24:MI:SS')), dataset_ AS (SELECT DETAIL_TEXT, OBJECT_NAME, DOCUMENT_NAME, OBJECT_TYPE, EVENT_TYPE_DESCRIPTION, START_TIMESTAMP FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "Path",
            "legacyId": "DP6.DO73",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "OBJECT_NAME",
            "type": "string",
            "display": "Object Name",
            "legacyId": "DP6.DO3e",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "DOCUMENT_NAME",
            "type": "string",
            "display": "Document Name",
            "legacyId": "DP6.DO85",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "OBJECT_TYPE",
            "type": "string",
            "display": "Document Type",
            "legacyId": "DP6.DO94",
            "legacySqlClass": "column"
          },
          {
            "index": 4,
            "name": "EVENT_TYPE_DESCRIPTION",
            "type": "string",
            "display": "Action Name",
            "legacyId": "DP6.DO19",
            "legacySqlClass": "column"
          },
          {
            "index": 5,
            "name": "START_TIMESTAMP",
            "type": "date",
            "display": "Action Time",
            "legacyId": "DP6.DO1e",
            "legacySqlClass": "column"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": [
                "${role}",
                "ROLE_PRISONS_REPORTING_USER"
              ]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "26051.RS",
      "name": "By Times Read",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "undefined/DP6",
      "filter": {
        "name": "prefilter_",
        "query": "prefilter_ AS (SELECT * FROM dataset_ WHERE V_OBJECT <> 'no')"
      },
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:START_TIMESTAMP",
            "display": "Action Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP6.DO1e"
          },
          {
            "name": "$ref:EVENT_TYPE_DESCRIPTION",
            "display": "Action Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP6.DO19"
          },
          {
            "name": "$ref:DOCUMENT_NAME",
            "display": "Document Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP6.DO85"
          },
          {
            "name": "$ref:OBJECT_NAME",
            "display": "Object Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false,
            "legacyId": "DP6.DO3e"
          }
        ]
      }
    },
    {
      "id": "137734.RS",
      "name": "Report 2",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "summary",
        "field": []
      },
      "dataset": "MISSING"
    }
  ],
  "errors": [
    {
      "type": "schema",
      "error": "instance.report[1] requires property \"dataset\"",
      "entityId": "klf.X4QABAjPZusA1v8AFE.rcVQ",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "Report Variant 137734.RS does not have corresponding dataset undefined",
      "entityId": "137734.RS",
      "entityType": "variant"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP6",
      "entityType": "dataset"
    }
  ]
}