{
  "id": "FpDtS14HzQcAVWEBAHBbSl8VACJIAFJ8",
  "name": "MIS MIS Report Check",
  "metadata": {
    "version": "1.0.0",
    "tags": [
      "Local Report"
    ]
  },
  "description": "Run report to see which Local reports are currently being accessed, and by whom, in order to advise users of a preferred Standard Report that will cover their requirements.",
  "datasource": [
    {
      "id": "bodmis",
      "name": "BODMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "bodmis"
    }
  ],
  "dataset": [
    {
      "id": "undefined/DP8",
      "name": "Top Documents by Refreshes",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT DISTINCT DERIVED_DOCUMENT_NAME.Detail_Text, DERIVED_OBJECT_PATH.Detail_Text AS PATH FROM (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 8)) DERIVED_DOCUMENT_NAME, (SELECT AUDIT_EVENT.Server_CUID, AUDIT_EVENT.Event_ID, AUDIT_EVENT.Event_Type_ID, RTRIM(TO_CHAR(AUDIT_DETAIL.Detail_Text), CHR(0)) AS Detail_Text FROM AUDIT_EVENT, AUDIT_DETAIL WHERE (AUDIT_EVENT.Server_CUID = AUDIT_DETAIL.Server_CUID) AND (AUDIT_EVENT.Event_ID = AUDIT_DETAIL.Event_ID) AND (AUDIT_DETAIL.Detail_Type_ID = 43)) DERIVED_OBJECT_PATH, AUDIT_EVENT WHERE (AUDIT_EVENT.Event_ID = DERIVED_DOCUMENT_NAME.Event_ID AND AUDIT_EVENT.Server_CUID = DERIVED_DOCUMENT_NAME.Server_CUID) AND (AUDIT_EVENT.Event_ID = DERIVED_OBJECT_PATH.EVENT_ID AND AUDIT_EVENT.Server_CUID = DERIVED_OBJECT_PATH.SERVER_CUID) AND (AUDIT_EVENT.Object_Type = 'Web Intelligence' AND AUDIT_EVENT.Event_Type_ID = 19)), dataset_ AS (SELECT DETAIL_TEXT, PATH FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "DETAIL_TEXT",
            "type": "string",
            "display": "Document Name",
            "legacyId": "DP8.DO40",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "PATH",
            "type": "string",
            "display": "Path",
            "legacyId": "DP8.DO73",
            "legacySqlClass": "column"
          }
        ]
      }
    },
    {
      "id": "undefined/DPa",
      "name": "Top Documents by Refreshes (1)",
      "description": "Activity",
      "datasource": "bodmis",
      "query": "dataset_base_ AS (SELECT AUDIT_EVENT.Event_ID, AUDIT_EVENT.Start_Timestamp, AUDIT_EVENT.User_Name FROM AUDIT_EVENT WHERE (AUDIT_EVENT.Object_Type = 'Web Intelligence' AND AUDIT_EVENT.Event_Type_ID = 19 AND AUDIT_EVENT.Start_Timestamp BETWEEN TO_DATE('10-02-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS') AND TO_DATE('17-02-2020 00:00:00', 'DD-MM-YYYY HH24:MI:SS'))), dataset_ AS (SELECT EVENT_ID, START_TIMESTAMP, USER_NAME FROM dataset_base_)",
      "parameters": [],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "EVENT_ID",
            "type": "string",
            "display": "Action ID",
            "legacyId": "DPa.DO21",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "START_TIMESTAMP",
            "type": "date",
            "display": "Action Time",
            "legacyId": "DPa.DO9f",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "USER_NAME",
            "type": "string",
            "display": "User Name",
            "legacyId": "DPa.DO20",
            "legacySqlClass": "column"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": [
                "${role}",
                "ROLE_PRISONS_REPORTING_USER"
              ]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "20557.RS",
      "name": "Overall Stats",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "feature": [
        {
          "type": "print"
        }
      ],
      "specification": {
        "template": "summary",
        "field": []
      },
      "dataset": "MISSING"
    }
  ],
  "errors": [
    {
      "type": "schema",
      "error": "instance.report[0] requires property \"dataset\"",
      "entityId": "FpDtS14HzQcAVWEBAHBbSl8VACJIAFJ8",
      "entityType": "dpd"
    },
    {
      "type": "schema",
      "error": "Report Variant 20557.RS does not have corresponding dataset undefined",
      "entityId": "20557.RS",
      "entityType": "variant"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DP8",
      "entityType": "dataset"
    },
    {
      "type": "athenQuery",
      "error": "Error: Error: Query failed: GENERIC_USER_ERROR: Failed To Get Query Passthrough Schema",
      "entityId": "undefined/DPa",
      "entityType": "dataset"
    }
  ]
}